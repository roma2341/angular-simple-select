<div
  cdkOverlayOrigin
  #trigger="cdkOverlayOrigin"
  class="select-wrapper"
  (click)="openDropdown()"
  tabindex="0"
  (blur)="closeDropdown()"
>
  @if (!multiValue()?.length && !value()) {
    <div class="select-placeholder">
      {{ placeholder() }}
    </div>
  } @else {
    <div class="select-value">
      @let selectedOptionVal = selectedOption();
      @if (multiple()) {
        {{ multiValue()?.length }} selected
      } @else if (selectedOptionVal) {
        {{ selectedOptionVal | selectorOptionLabel: labelKey() }}
        <div (click)="clearValue()" class="clear-icon"></div>
      }
    </div>
  }
  <ng-template #overlayTemplate>
    <div class="options-dropdown">
      @for (option of options(); track option) {
        <div class="options-dropdown-item" (click)="selectOption(option)" [class.selected]="isSelected(option)">
          @if (optionTemplate()) {
            <ng-container *ngTemplateOutlet="optionTemplate; context: { $implicit: option }"></ng-container>
          } @else {
            {{ option | selectorOptionLabel: labelKey() }}
          }
        </div>
      }
    </div>
  </ng-template>
</div>
