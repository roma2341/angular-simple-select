<div class="custom-selector" (click)="toggleDropdown()" tabindex="0" (blur)="isOpen.set(false)">
  <div class="placeholder">
    @if(!multiValue()?.length && !value()){
      {{placeholder()}}
    }
    @if(multiple()){
      {{ value?.length }} selected
    }
    @else{
      value
    }
    <ng-container *ngIf="!multiple && value">
      {{ options.find(o => o[valueKey] === value)?.[labelKey] }}
    </ng-container>
  </div>

  <div class="dropdown" *ngIf="isOpen">
    <div *ngFor="let option of options"
         (click)="selectOption(option)"
         [class.selected]="isSelected(option)">
      <ng-container *ngIf="optionTemplate; else defaultTpl">
        <ng-container *ngTemplateOutlet="optionTemplate; context: {$implicit: option}"></ng-container>
      </ng-container>
      <ng-template #defaultTpl>
        {{ option[labelKey] }}
      </ng-template>
    </div>
  </div>
</div>
