<div cdkOverlayOrigin #trigger="cdkOverlayOrigin" class="select-wrapper" (click)="openDropdown()" tabindex="0">
  @if (!multiValue()?.length && !value()) {
    <div class="select-placeholder">
      {{ placeholder() }}
    </div>
  } @else {
    <div class="select-value-wrapper">
      @let selectedOptionVal = selectedOption();
      <div class="select-value">
        @if (multiple()) {
          {{ multiValue()?.length }} selected
        } @else if (selectedOptionVal) {
          {{ selectedOptionVal | selectorOptionLabel: labelKey() }}
        }
      </div>
      <div class="clear-icon-wrapper">
        <div (click)="$event.stopPropagation(); clearValue()" class="clear-icon"></div>
      </div>
    </div>
  }
  <ng-template #overlayTemplate>
    <div class="options-dropdown">
      <div class="options-dropdown-header">
        @if (multiple()) {
          Select options
        } @else {
          Select option
        }
        <input #searchInputRef (keyup)="inputKeyUp(searchInputRef.value, $event)" />
      </div>
      @for (option of options(); track option) {
        <div class="options-dropdown-item" (click)="selectOption(option)" [class.selected]="isSelected(option)">
          @if (optionTemplate()) {
            <ng-container *ngTemplateOutlet="optionTemplate; context: { $implicit: option }"></ng-container>
          } @else {
            {{ option | selectorOptionLabel: labelKey() }}
          }
        </div>
      }
    </div>
  </ng-template>
</div>
