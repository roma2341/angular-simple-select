<div
  cdkOverlayOrigin
  #trigger="cdkOverlayOrigin"
  class="custom-selector"
  (click)="openDropdown()"
  tabindex="0"
  (blur)="closeDropdown()"
>
  <div class="placeholder">
    @if (!multiValue()?.length && !value()) {
      {{ placeholder() }}
    }
    @let selectedOptionVal = selectedOption();
    @if (multiple()) {
      {{ multiValue()?.length }} selected
    } @else if (selectedOptionVal) {
      {{ selectedOptionVal | selectorOptionLabel: labelKey() }}
    }
  </div>
  <ng-template #overlayTemplate>
    <div class="dropdown">
      @for (option of options(); track option) {
        <div (click)="selectOption(option)" [class.selected]="isSelected(option)">
          @if (optionTemplate()) {
            <ng-container *ngTemplateOutlet="optionTemplate; context: { $implicit: option }"></ng-container>
          } @else {
            {{ option | selectorOptionLabel: labelKey() }}
          }
        </div>
      }
    </div>
  </ng-template>
</div>
